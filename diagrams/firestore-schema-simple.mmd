flowchart TD
    subgraph Runs["Collection: runs"]
        R["runs/{runId}"]
        R_fields["Fields:<br/>• preavaluo_id<br/>• sourceBucket<br/>• folderPrefix<br/>• status<br/>• documentCount<br/>• processedCount<br/>• failedCount<br/>• createdAt<br/>• updatedAt"]
    end

    subgraph Docs["Subcollection: documents"]
        D["documents/{docId}"]
        D_fields["Fields:<br/>• docId<br/>• runId<br/>• folioId<br/>• fileId<br/>• gcsUri<br/>• status<br/>• processingStartedAt<br/>• processedAt<br/>• createdAt<br/>• updatedAt"]
    end

    subgraph Classification["Classification Object"]
        C_fields["• documentType<br/>• confidence<br/>• classifierVersion"]
    end

    subgraph Extraction["Extraction Object"]
        E_fields["Fields:<br/>• ORG_NAME<br/>• REPORTING_PERIOD<br/>• CURRENCY<br/>• UNITS_SCALE<br/>• STATEMENT_TITLE<br/>• line_items[]"]
        E_meta["Metadata:<br/>• page_count<br/>• processor_version<br/>• extraction_schema_version<br/>• mime_type<br/>• decision_path<br/>• table_references[]"]
    end

    subgraph Error["Error Object (optional)"]
        Err_fields["• code<br/>• message"]
    end

    R --> D
    D --> Classification
    D --> Extraction
    D -.optional.-> Error
